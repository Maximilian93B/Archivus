# Archivus + Supabase Configuration
# Copy this to .env for Supabase deployment

# Environment
ENVIRONMENT=development

# Server Configuration
PORT=8080
HOST=localhost

# === SUPABASE CONFIGURATION ===
# Get these from your Supabase project dashboard

# Database (PostgreSQL)
DATABASE_URL=postgresql://username:password@localhost:5432/archivus_dev
DATABASE_URL_TEST=postgresql://username:password@localhost:5432/archivus_test

# Supabase Project Settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key
SUPABASE_JWT_SECRET=your-jwt-secret
SUPABASE_BUCKET=documents

# Redis (Use Upstash or other managed Redis)
REDIS_URL=redis://localhost:6379

# JWT Configuration (keep separate from Supabase for flexibility)
JWT_SECRET=your-jwt-secret-key
JWT_EXPIRY=24h

# === SUPABASE STORAGE ===
STORAGE_TYPE=supabase
STORAGE_PATH=./uploads
# Supabase storage will be accessed via the client

# AI Configuration (OpenAI for production AI features)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1000
ENABLE_AI_PROCESSING=false

# Ollama (Optional local AI fallback)
OLLAMA_HOST=http://ollama.yourdomain.com:11434
OLLAMA_MODEL=llama2

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60s

# File Upload Limits
MAX_FILE_SIZE=104857600 # 100MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,jpg,jpeg,png

# CORS (Add your frontend domains)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Email Configuration (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@yourdomain.com

# Monitoring & Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Background Jobs
WORKER_CONCURRENCY=10
JOB_RETRY_ATTEMPTS=3

# Feature Flags
ENABLE_OCR=false
ENABLE_WEBHOOKS=false

# === HTTPS/TLS Configuration ===
# Only needed if running direct TLS (not behind reverse proxy)
TLS_CERT_FILE=
TLS_KEY_FILE=

# === Supabase Migration Notes ===
# 1. Create project at https://supabase.com/dashboard
# 2. Enable extensions: uuid-ossp, vector
# 3. Run migrations: go run cmd/migrate/main.go up
# 4. Create storage bucket: "documents" 
# 5. Set up RLS policies for multi-tenancy 