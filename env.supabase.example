# Archivus + Supabase Configuration
# Copy this to .env for Supabase deployment

# Environment
ENVIRONMENT=production

# Server Configuration
PORT=8080
HOST=0.0.0.0

# === SUPABASE CONFIGURATION ===
# Get these from your Supabase project dashboard

# Database (Replace [PROJECT-REF] and [PASSWORD] with your values)
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres?sslmode=require

# Supabase Project Settings
SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=[YOUR-ANON-KEY]
SUPABASE_SERVICE_KEY=[YOUR-SERVICE-KEY]

# Redis (Use Upstash or other managed Redis)
REDIS_URL=redis://default:[PASSWORD]@[HOST]:6379

# JWT Configuration (keep separate from Supabase for flexibility)
JWT_SECRET=your-super-secure-production-jwt-secret-change-this
JWT_EXPIRY=24h

# === SUPABASE STORAGE ===
STORAGE_TYPE=supabase
STORAGE_BUCKET=documents
# Supabase storage will be accessed via the client

# AI Configuration (OpenAI for production AI features)
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
ENABLE_AI_PROCESSING=true

# Ollama (Optional local AI fallback)
OLLAMA_HOST=http://ollama.yourdomain.com:11434
OLLAMA_MODEL=llama2

# Rate Limiting
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60s

# File Upload Limits
MAX_FILE_SIZE=104857600 # 100MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,jpg,jpeg,png,xls,xlsx,ppt,pptx

# CORS (Add your frontend domains)
ALLOWED_ORIGINS=https://app.archivus.com,https://archivus.com,http://localhost:3000

# Email Configuration (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@yourdomain.com

# Monitoring & Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Background Jobs
WORKER_CONCURRENCY=10
JOB_RETRY_ATTEMPTS=3

# Feature Flags
ENABLE_OCR=true
ENABLE_WEBHOOKS=true

# === HTTPS/TLS Configuration ===
# Only needed if running direct TLS (not behind reverse proxy)
# TLS_CERT_FILE=/etc/ssl/certs/archivus.pem
# TLS_KEY_FILE=/etc/ssl/private/archivus.key

# === Supabase Migration Notes ===
# 1. Create project at https://supabase.com/dashboard
# 2. Enable extensions: uuid-ossp, vector
# 3. Run migrations: go run cmd/migrate/main.go up
# 4. Create storage bucket: "documents" 
# 5. Set up RLS policies for multi-tenancy 